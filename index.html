<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI æ—…è¡ŒåŠ©æ‰‹ Â· æ²³å—çœæ½¢å·å¿æ·±åº¦æ”»ç•¥</title>
  <meta name="description" content="æ½¢å·å¿æ·±åº¦æ—…æ¸¸æ”»ç•¥ï¼šç²¾é€‰æ™¯ç‚¹ã€3æ—¥è·¯çº¿ã€ç²¾ç¾é…å›¾ä¸ç”œç¾å¥³å£°è¯­éŸ³è®²è§£ã€‚çº¯é™æ€ç½‘é¡µï¼Œæ‰“å¼€å³ç”¨ã€‚" />
  <style>
    :root{
      --bg:#070b18;
      --glass:rgba(255,255,255,.10);
      --stroke:rgba(255,255,255,.18);
      --txt:#eef1f6;
      --muted:#a8b0c2;
      --accent:#7aa2ff;
      --gold:#e6c17a;
      --good:#6ee7b7;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
      color:var(--txt);
      background:
        radial-gradient(1200px 600px at 10% -10%, #1b2455, transparent 60%),
        radial-gradient(1000px 500px at 110% 10%, #2a1f4d, transparent 55%),
        radial-gradient(800px 500px at 50% 120%, #183a2b, transparent 55%),
        var(--bg);
    }
    header{position:relative; overflow:hidden; padding:88px 18px 112px; text-align:center;}
    .heroBg{
      position:absolute; inset:0; z-index:-1; opacity:.36;
      background:url("https://images.unsplash.com/photo-1524492412937-b28074a5d7da?q=80&w=2400&auto=format&fit=crop") center/cover no-repeat;
      filter:saturate(1.1) contrast(1.05);
    }
    .heroGlow{
      position:absolute; inset:-30%;
      background: radial-gradient(circle at 30% 30%, rgba(122,162,255,.25), transparent 35%),
                  radial-gradient(circle at 70% 20%, rgba(230,193,122,.20), transparent 35%),
                  radial-gradient(circle at 50% 70%, rgba(110,231,183,.18), transparent 40%);
      z-index:-1;
      transform: rotate(6deg);
    }
    h1{margin:0 0 10px; font-size:clamp(30px,5vw,56px); letter-spacing:.6px;}
    .sub{max-width:980px;margin:0 auto;color:var(--muted);line-height:1.6}
    .pillRow{margin-top:16px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px;
      background:rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.18);
      color:var(--muted); backdrop-filter: blur(8px);
    }
    .container{max-width:1200px;margin:-58px auto 64px; padding:0 18px}
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
      border:1px solid var(--stroke);
      border-radius:var(--r);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .inner{padding:18px}
    .topbar{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between}
    .filters{display:flex; flex-wrap:wrap; gap:10px}
    .chip{
      padding:8px 12px; border-radius:999px; cursor:pointer;
      border:1px solid rgba(255,255,255,.28);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      user-select:none;
    }
    .chip.active{background:linear-gradient(135deg,var(--accent),#9bd0ff); color:#061022; border-color:transparent;}
    .btn{
      padding:10px 14px; border-radius:999px; cursor:pointer; border:0;
      background:linear-gradient(135deg,var(--accent),#9bd0ff);
      color:#061022; font-weight:700;
    }
    .btn.secondary{
      background:transparent; color:var(--txt);
      border:1px solid rgba(255,255,255,.35);
    }
    .btnRow{display:flex; gap:10px; flex-wrap:wrap}
    .spots{grid-column:span 12}
    .aside{grid-column:span 12}
    @media (min-width: 960px){
      .spots{grid-column:span 8}
      .aside{grid-column:span 4}
    }
    .spot{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      overflow:hidden;
      background:rgba(0,0,0,.14);
      transition: transform .22s ease, border-color .22s ease, box-shadow .22s ease;
    }
    .spot:hover{
      transform: translateY(-3px);
      border-color: rgba(122,162,255,.55);
      box-shadow: 0 18px 48px rgba(0,0,0,.45);
    }
    .spotGrid{display:grid; grid-template-columns: 1fr; gap:0;}
    .spotMedia{position:relative; height:260px; background:#0c1226;}
    .spotMedia img{width:100%; height:100%; object-fit:cover; display:block;}
    .badge{
      position:absolute; left:14px; top:14px;
      padding:6px 10px; border-radius:999px;
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.22);
      backdrop-filter: blur(10px);
      font-size:12px; color:var(--txt);
    }
    .spotBody{padding:14px 14px 16px}
    .spotTitle{display:flex; gap:10px; align-items:baseline; justify-content:space-between; flex-wrap:wrap}
    .spotTitle h3{margin:0; font-size:18px}
    .meta{color:var(--muted); font-size:12px; line-height:1.45}
    .tags{display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 10px}
    .tag{font-size:12px; color:#061022; background:var(--gold); padding:4px 8px; border-radius:999px;}
    .hl{margin:0; color:var(--txt); line-height:1.65}
    .kv{display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:12px; color:var(--muted); font-size:12px;}
    .kv div{padding:10px; border:1px solid rgba(255,255,255,.14); border-radius:14px; background:rgba(0,0,0,.12);}
    .spotActions{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .linkBtn{
      padding:9px 12px; border-radius:999px; font-size:13px;
      border:1px solid rgba(255,255,255,.32);
      background:rgba(0,0,0,.12);
      color:var(--txt); text-decoration:none;
    }
    .sectionTitle{margin:0 0 10px; font-size:18px}
    .small{color:var(--muted); font-size:12px; line-height:1.6}
    .itinerary .day{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px; padding:12px; background:rgba(0,0,0,.12);
      margin-top:10px;
    }
    .day h4{margin:0 0 8px}
    .list{margin:0; padding-left:18px; color:var(--muted); line-height:1.8}
    .cta{
      margin-top:14px; padding:14px; border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(135deg, rgba(122,162,255,.18), rgba(230,193,122,.12));
    }
    footer{padding:26px; text-align:center; color:var(--muted)}
    code{color:#d7e3ff}
  </style>
</head>
<body>
<header>
  <div class="heroBg"></div>
  <div class="heroGlow"></div>
  <h1>æ²³å—çœæ½¢å·å¿ Â· AI æ·±åº¦æ—…æ¸¸æ”»ç•¥</h1>
  <p class="sub">
    äº§å“å±•ç¤ºçº§ Demoï¼šç²¾é€‰æ™¯ç‚¹ã€ä¸‰æ—¥è·¯çº¿ã€å›ºå®šé…å›¾ï¼Œå¹¶å¸¦<strong>ç”œç¾å¥³å£°å¯¼æ¸¸è¯­éŸ³</strong>è®²è§£ã€‚
    è¿™æ˜¯çº¯é™æ€ç½‘é¡µï¼šä½ æŠŠå®ƒä¸¢åˆ° GitHub Pagesï¼Œå°±èƒ½å¾—åˆ°ä¸€æ¡é“¾æ¥ï¼Œæ‰“å¼€å³å¯ä½¿ç”¨ä¸è†å¬ã€‚
  </p>
  <div class="pillRow">
    <div class="pill">ğŸ“ åŸå¸‚ï¼šæ½¢å·å¿</div>
    <div class="pill">ğŸ–¼ï¸ å›¾ç‰‡ï¼šå›ºå®šç›´é“¾ï¼ˆä¸ä¹±ï¼‰</div>
    <div class="pill">ğŸ§ è¯­éŸ³ï¼šä¼˜å…ˆ MP3ï¼ˆç¨³å®šå¥½å¬ï¼‰ï¼Œæ—  MP3 è‡ªåŠ¨å…œåº•ç³»ç»Ÿå¥³å£°</div>
  </div>
</header>

<main class="container">
  <section class="grid">

    <div class="card spots">
      <div class="inner">
        <div class="topbar">
          <div>
            <h2 style="margin:0 0 6px">ç²¾é€‰æ™¯ç‚¹ Â· Top 8</h2>
            <div class="small">
              è¯­éŸ³ä¼˜å…ˆæ’­æ”¾ä»“åº“é‡Œçš„ <code>/audio/spot1.mp3</code> â€¦ <code>/audio/spot8.mp3</code>ã€‚
              å¦‚æœä½ è¿˜æ²¡ç”Ÿæˆ MP3ï¼Œç½‘é¡µä¼šè‡ªåŠ¨ä½¿ç”¨æµè§ˆå™¨â€œä¸­æ–‡å¥³å£°â€å…œåº•ï¼ˆç”œä¸€ç‚¹ï¼šæ›´é«˜ pitch + æ›´è½»å¿«è¯­é€Ÿï¼‰ã€‚
            </div>
          </div>
          <div class="btnRow">
            <button class="btn" id="playAll">æ’­æ”¾æ•´æ®µå¯¼è§ˆ</button>
            <button class="btn secondary" id="stopAll">åœæ­¢</button>
          </div>
        </div>

        <div class="filters" style="margin-top:12px">
          <div class="chip active" data-filter="all">å…¨éƒ¨</div>
          <div class="chip" data-filter="è‡ªç„¶">è‡ªç„¶</div>
          <div class="chip" data-filter="å†å²">å†å²</div>
          <div class="chip" data-filter="äº²å­">äº²å­</div>
          <div class="chip" data-filter="å¤œæ¸¸">å¤œæ¸¸</div>
        </div>

        <div id="spotsWrap" style="margin-top:14px"></div>
      </div>
    </div>

    <aside class="card aside">
      <div class="inner">
        <h3 class="sectionTitle">3 å¤©æ¸¸ç©è·¯çº¿</h3>
        <div class="itinerary" id="itinerary"></div>

        <h3 class="sectionTitle" style="margin-top:16px">ç¾é£Ÿä¸å¤œæ™š</h3>
        <ul class="list" id="food"></ul>

        <h3 class="sectionTitle" style="margin-top:16px">äº¤é€šåˆ°è¾¾</h3>
        <ul class="list" id="traffic"></ul>

        <h3 class="sectionTitle" style="margin-top:16px">éƒ¨ç½²ä¸éŸ³é¢‘è¯´æ˜</h3>
        <p class="small">
          âœ… æƒ³è¦â€œç¨³å®šç”œç¾å¥³å£°â€ï¼šè¯·ç”Ÿæˆå¹¶æäº¤ <code>/audio</code> ç›®å½•ä¸‹çš„ 8 ä¸ª MP3ã€‚<br/>
          âœ… æ²¡æœ‰ MP3 ä¹Ÿèƒ½ç”¨ï¼šç½‘é¡µä¼šå¯ç”¨ Web Speech å¥³å£°å…œåº•ï¼ˆä½†ä¸åŒç”µè„‘éŸ³è‰²ä¸ä¸€è‡´ï¼‰ã€‚
        </p>

        <div class="cta">
          <div class="small">
            ä½ å¯ä»¥å…ˆæŠŠç½‘é¡µä¸Šçº¿ï¼Œå†æ…¢æ…¢æŠŠéŸ³é¢‘è¡¥é½ã€‚è¡¥é½åæ— éœ€æ”¹ä»£ç ï¼Œåˆ·æ–°é¡µé¢å°±è‡ªåŠ¨å˜â€œç”œç¾å¥³å£°å¯¼è§ˆâ€ã€‚
          </div>
        </div>
      </div>
    </aside>

  </section>
</main>

<footer>Â© AI Travel Assistant Demo Â· æ½¢å·å¿</footer>

<script>
  // =========================
  // 1) æ•°æ®ï¼šå›ºå®šå›¾ç‰‡ + å›ºå®šéŸ³é¢‘æ–‡ä»¶å
  //    éŸ³é¢‘æ–‡ä»¶åçº¦å®šï¼š/audio/spot1.mp3 ... spot8.mp3
  // =========================
  const DATA = {
    city: "æ²³å—çœæ½¢å·å¿",
    spots: [
      {
        id: 1,
        name: "å…‰å·å…¬å›­ï¼ˆæ½¢æ²³ç”Ÿæ€å»Šé“ï¼‰",
        address: "æ½¢å·å¿åŸåŒºæ½¢æ²³ä¸¤ä¾§ï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.058,32.137",
        tags: ["è‡ªç„¶","å¤œæ¸¸","æ‹ç…§"],
        highlights: ["æ»¨æ°´æ­¥é“é€‚åˆ City Walk","å¤œé—´ç¯å…‰ä¸æ°´æ™¯æ°›å›´æ„Ÿå¼º","ç»¿åŒ–èŠ±å¢ƒå¾ˆå‡ºç‰‡"],
        best_time: "å‚æ™šæ—¥è½åˆ°å¤œé—´",
        duration: "1.5â€“2.5 å°æ—¶",
        image: "https://cds.chinadaily.com.cn/dams/capital/image/202304/24/64465105e4b030573a5d14e3.png",
        voice_text: "æˆ‘ä»¬ç°åœ¨æ¥åˆ°æ½¢å·çš„å…‰å·å…¬å›­ã€‚æœ€æ¨èçš„æ‰“å¼€æ–¹å¼ï¼Œæ˜¯æ²¿ç€æ½¢æ²³æ…¢æ…¢èµ°ä¸€æ®µï¼šå…ˆçœ‹æ°´é¢å’Œæ ‘å½±ï¼Œå†æŠŠèŠ‚å¥äº¤ç»™æ™šé£ã€‚æ—¥è½åç¯å…‰äº®èµ·ï¼Œæ°›å›´ä¼šæ›´æ¸©æŸ”ã€‚ä½ å¯ä»¥æ‰¾ä¸€æ®µæœ€èˆ’æœçš„æ­¥é“ï¼Œè¾¹èµ°è¾¹æ‹ï¼Œä¸è¦èµ¶æ—¶é—´ã€‚"
      },
      {
        id: 2,
        name: "å…‰å·ä¹‹é—¨ï¼ˆå¤œæ™¯æ°´å¹•ï¼‰",
        address: "å…‰å·å…¬å›­å†…ï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.058,32.137",
        tags: ["å¤œæ¸¸","æ‹ç…§"],
        highlights: ["å¤œé—´æ°´å¹•ä¸ç¯å…‰ç§€è§†è§‰å†²å‡»å¼º","é€‚åˆæ‹è§†é¢‘ä¸å¤œæ™¯äººåƒ","å¾ˆåƒåŸå¸‚æ–°åœ°æ ‡"],
        best_time: "å¤©é»‘åï¼ˆæ›´å¥½çœ‹ï¼‰",
        duration: "30â€“60 åˆ†é’Ÿ",
        image: "https://cds.chinadaily.com.cn/dams/capital/image/202304/24/6446510be4b030573a5d14f2.jpeg",
        voice_text: "è¿™ä¸€å¤„æ›´åƒæ½¢å·çš„å¤œæ™šåç‰‡ã€‚æ°´å¹•å’Œç¯å…‰å åœ¨ä¸€èµ·ï¼Œä¼šæœ‰ä¸€ç‚¹ç‚¹æ¢¦å¹»çš„èˆå°æ„Ÿã€‚å»ºè®®ä½ ç«™è¿œä¸€äº›å–æ™¯ï¼ŒæŠŠäººç¾¤ã€å…‰çº¿å’Œæ°´å¹•éƒ½æ”¶å…¥ç”»é¢ï¼›æƒ³æ‹äººåƒå°±é€‰ä¾§é¢å…‰ï¼Œè„¸éƒ¨ä¼šæ›´æŸ”å’Œã€æ›´ç”œã€‚"
      },
      {
        id: 3,
        name: "é•‡æ½¢æ¡¥ï¼ˆæ½¢æ²³æ¡¥æ™¯ï¼‰",
        address: "æ½¢å·å¿åŸåŒºï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.055,32.130",
        tags: ["æ‹ç…§","å¤œæ¸¸"],
        highlights: ["æ¡¥ä¸æ²³æ™¯æ„å›¾å¾ˆèˆ’æœ","é€‚åˆé»„æ˜æˆ–æ¸…æ™¨æ‹ç…§","æ²¿å²¸æ•£æ­¥å¾ˆæƒ¬æ„"],
        best_time: "æ¸…æ™¨æˆ–å‚æ™š",
        duration: "40â€“90 åˆ†é’Ÿ",
        image: "https://youimg1.c-ctrip.com/target/10050t000000id2dx4DF0.jpg",
        voice_text: "é•‡æ½¢æ¡¥è¿™ä¸€æ®µå¾ˆé€‚åˆåœä¸‹æ¥ï¼Œå®‰é™çœ‹ä¸€ä¼šå„¿æ²³ã€‚é»„æ˜æ—¶æ°´é¢ä¼šæœ‰å±‚æ¬¡ï¼Œæ¡¥çš„çº¿æ¡ä¹Ÿæ›´å¥½çœ‹ã€‚ä½ å¯ä»¥æ²¿å²¸èµ°èµ°ï¼Œæ‰¾åˆ°èƒ½åŒæ—¶æ‹åˆ°æ¡¥å’Œæ²³çš„è§’åº¦ï¼ŒæŒ‰ä¸‹å¿«é—¨çš„æ—¶å€™ï¼Œè®°å¾—æŠŠå‘¼å¸æ”¾æ…¢ä¸€ç‚¹ã€‚"
      },
      {
        id: 4,
        name: "æ½¢æ²³æ»¨æ°´é£å…‰ï¼ˆæ²³å²¸æ…¢èµ°ï¼‰",
        address: "æ½¢å·å¿æ½¢æ²³æ²¿çº¿ï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.056,32.134",
        tags: ["è‡ªç„¶","æ‹ç…§"],
        highlights: ["æ²³æ¹¾è§†é‡å¼€é˜”","é€‚åˆè½»è¿åŠ¨ä¸æ”¾ç©º","æ˜¥å¤ç»¿æ„æœ€æµ“"],
        best_time: "æ™´å¤©ä¸Šåˆ / å‚æ™š",
        duration: "1â€“2 å°æ—¶",
        image: "https://youimg1.c-ctrip.com/target/100o0t000000i9eg0CFE2.jpg",
        voice_text: "å¦‚æœä½ æƒ³è¦æœ€è½»æ¾çš„ä¸€æ®µè¡Œç¨‹ï¼Œå°±æ¥æ½¢æ²³è¾¹èµ°èµ°å§ã€‚è¿™é‡Œä¸éœ€è¦æ‰“å¡ä»»åŠ¡ï¼Œåªéœ€è¦æŠŠæ­¥å­æ…¢ä¸‹æ¥ï¼šçœ‹æ°´é¢ã€çœ‹æ ‘å½±ã€å¬é£ã€‚æ—…è¡Œé‡Œæœ€æ²»æ„ˆçš„æ—¶åˆ»ï¼Œå¾€å¾€å°±æ˜¯è¿™ç§ä¸è¢«å‚¬ä¿ƒçš„æ•£æ­¥ã€‚"
      },
      {
        id: 5,
        name: "é»„å›½æ•…åŸï¼ˆé—å€Â·äººæ–‡å‘ï¼‰",
        address: "æ½¢å·å¿åŸè¥¿ï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.000,32.120",
        tags: ["å†å²","æ–‡åŒ–","æ‹ç…§"],
        highlights: ["å†å²æ„Ÿå¾ˆå¼º","é€‚åˆäººæ–‡å‘æ‹ç…§","æ›´æ¨èç™½å¤©æ…¢æ¸¸"],
        best_time: "ä¸Šåˆ 9:00â€“11:30",
        duration: "1.5â€“2.5 å°æ—¶",
        image: "https://5b0988e595225.cdn.sohucs.com/images/20180707/70171aec8ed442e097dc012b545ea17a.jpeg",
        voice_text: "é»„å›½æ•…åŸæ›´åƒä¸€æ®µè¢«ä¿ç•™ä¸‹æ¥çš„æ—¶é—´ã€‚æ¥åˆ°è¿™é‡Œå»ºè®®ä½ æŠŠèŠ‚å¥æ”¾æ…¢ï¼šå…ˆç”¨çœ¼ç›çœ‹æ ¼å±€ä¸åœ°å½¢ï¼Œå†å»æƒ³è±¡å½“å¹´çš„åŸä¸äººã€‚å®ƒä¸é çƒ­é—¹å–èƒœï¼Œè€Œé å†å²æ„Ÿã€‚ç™½å¤©æ¥å…‰çº¿å¹²å‡€ï¼Œæ‹ç…§ä¹Ÿä¼šæ›´æœ‰è´¨æ„Ÿã€‚"
      },
      {
        id: 6,
        name: "æœ›æ²³æ¥¼ï¼ˆåŸå¸‚è®°å¿†ï¼‰",
        address: "å°æ½¢æ²³åŒ—å²¸ä¸€å¸¦ï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.058,32.131",
        tags: ["å†å²","æ‹ç…§","å¤œæ¸¸"],
        highlights: ["æœ¬åœ°åœ°æ ‡è¾¨è¯†åº¦é«˜","é€‚åˆä¸æ²³æ™¯ä¸€èµ·å–æ™¯","å¤œé—´ç¯å…‰æ›´æœ‰å‘³é“"],
        best_time: "å‚æ™š / å¤œé—´",
        duration: "40â€“90 åˆ†é’Ÿ",
        image: "https://5b0988e595225.cdn.sohucs.com/images/20180707/f419eaa9fe4546259db682d37381c08a.jpeg",
        voice_text: "æœ›æ²³æ¥¼å±äºé‚£ç§ä¸€çœ¼å°±çŸ¥é“æ˜¯æœ¬åœ°åœ°æ ‡çš„åœ°æ–¹ã€‚ä½ å¯ä»¥æŠŠå®ƒå½“æˆæ½¢å·çš„ä¸€æ®µåŸå¸‚è®°å¿†ï¼šç™½å¤©çœ‹å»ºç­‘çš„çº¿æ¡ï¼Œæ™šä¸Šçœ‹ç¯å…‰ä¸æ²³é¢çš„å‘¼åº”ã€‚å»ºè®®ä½ åœ¨æ¥¼å‰åœä¸€ä¼šå„¿ï¼Œç•™ä¸€ç‚¹ç‚¹å®‰é™ç»™è‡ªå·±ã€‚"
      },
      {
        id: 7,
        name: "é“æ——æ†ï¼ˆå¤ç‰©åœ°æ ‡ï¼‰",
        address: "æ½¢å·å¿å—åŸä¸€å¸¦ï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.060,32.115",
        tags: ["å†å²","æ–‡åŒ–","æ‹ç…§"],
        highlights: ["å¾ˆæœ‰å¹´ä»£æ„Ÿçš„åŸå¸‚ç¬¦å·","é€‚åˆäººæ–‡çºªå¿µç…§","æ›´æ¨èç™½å¤©å‚è§‚"],
        best_time: "ç™½å¤©",
        duration: "30â€“60 åˆ†é’Ÿ",
        image: "https://5b0988e595225.cdn.sohucs.com/images/20180707/eceb000f84044dbdadc24b8c74de9859.jpeg",
        voice_text: "é“æ——æ†æ˜¯æ½¢å·å¾ˆæœ‰å¹´ä»£æ„Ÿçš„ç¬¦å·ã€‚å®ƒä¸æ˜¯å•†ä¸šåŒ–æ™¯ç‚¹ï¼Œä½†å¾ˆé€‚åˆä½œä¸ºæ—…é€”çš„ä¸€æ®µæ³¨è„šã€‚å»ºè®®ç™½å¤©æ¥ï¼Œå…‰çº¿ä¼šæŠŠæè´¨ç»†èŠ‚ç…§å¾—æ›´æ¸…æ¥šï¼›æ‹ç…§æ—¶å¯ä»¥ç•™ä¸€ç‚¹å¤©ç©ºï¼Œè®©ç”»é¢æ›´æœ‰å¼ åŠ›ã€‚"
      },
      {
        id: 8,
        name: "è€åŸè¡—å··ä¸å°åƒå¤œé€›ï¼ˆä½“éªŒå‘ï¼‰",
        address: "æ½¢å·å¿è€åŸåŒºï¼ˆä»¥åœ°å›¾ä¸ºå‡†ï¼‰",
        location: "115.050,32.125",
        tags: ["å¤œæ¸¸","äº²å­","ç¾é£Ÿ"],
        highlights: ["çƒŸç«æ°”æœ€æµ“","é€‚åˆè¾¹åƒè¾¹é€›","æ›´æ¥åœ°æ°”çš„ç”Ÿæ´»æ„Ÿ"],
        best_time: "18:00â€“21:00",
        duration: "2â€“3 å°æ—¶",
        image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=1600&auto=format&fit=crop",
        voice_text: "æƒ³ç”¨æœ€è½»æ¾çš„æ–¹å¼è®¤è¯†ä¸€åº§åŸï¼Œå°±å»å®ƒçš„è€è¡—èµ°èµ°ã€‚æ™šä¸Šæ¥æœ€åˆé€‚ï¼šç¯å…‰äº®èµ·æ¥ï¼Œé¦™æ°”ä¹Ÿä¼šè·Ÿç€å†’å‡ºæ¥ã€‚å»ºè®®ä½ å°‘é‡å¤šæ ·åœ°è¯•å‡ æ ·ï¼Œæ‰¾åˆ°æœ€å–œæ¬¢çš„é‚£ä¸€å®¶å†å›å¤´è®¤çœŸåƒä¸€ä»½ã€‚æ…¢æ…¢é€›ï¼Œä¼šæ›´ç”œã€‚"
      }
    ],
    itinerary: [
      {
        day: "Day 1 Â· åŸå¸‚æ…¢æ¸¸ä¸å¤œæ™šçƒŸç«",
        plan: [
          "ä¸Šåˆï¼šæ½¢æ²³æ»¨æ°´æ…¢èµ°ï¼Œå»ºç«‹â€œæ½¢å·ç¬¬ä¸€å°è±¡â€",
          "ä¸­åˆï¼šæœ¬åœ°å®¶å¸¸/ç‰¹è‰²å°é¦†ï¼ˆå°‘é‡å¤šæ ·ï¼‰",
          "ä¸‹åˆï¼šé»„å›½æ•…åŸï¼ˆäººæ–‡æ…¢æ¸¸ï¼‰",
          "æ™šä¸Šï¼šå…‰å·å…¬å›­å¤œæ™¯ + å…‰å·ä¹‹é—¨æ°´å¹•"
        ],
        backup: "é›¨å¤©ï¼šçºªå¿µ/åœºé¦†ç±»ç‚¹ä½ + å®¤å†…èŒ¶é¥® + è€åŸçŸ­é€›"
      },
      {
        day: "Day 2 Â· åœ°æ ‡ä¸æ¡¥æ™¯æ‹ç…§",
        plan: [
          "ä¸Šåˆï¼šé•‡æ½¢æ¡¥æ¡¥æ™¯æ‹ç…§ï¼ˆæ¸…æ™¨å…‰çº¿æ›´å¥½ï¼‰",
          "ä¸­åˆï¼šåŸåŒºå£ç¢‘åº—",
          "ä¸‹åˆï¼šæœ›æ²³æ¥¼ï¼ˆäººæ–‡+æ²³æ™¯ï¼‰",
          "æ™šä¸Šï¼šè€åŸè¡—å··å°åƒå¤œé€›"
        ],
        backup: "é›¨å¤©ï¼šè°ƒæ•´ä¸ºâ€œç¾é£Ÿè·¯çº¿ + å®¤å†…ç‚¹ä½â€ï¼Œä¸èµ¶æ™¯ç‚¹"
      },
      {
        day: "Day 3 Â· åŸå¸‚ç¬¦å·ä¸è½»æ¾æ”¶å®˜",
        plan: [
          "ä¸Šåˆï¼šé“æ——æ†ï¼ˆåŸå¸‚ç¬¦å·ï¼‰",
          "ä¸­åˆï¼šæ”¶å®˜ä¸€é¤ï¼ˆæŒ‘ä½ æœ€å–œæ¬¢çš„é‚£å®¶ï¼‰",
          "ä¸‹åˆï¼šå›æ²³è¾¹è¡¥æ‹/ä¹°ä¼´æ‰‹ç¤¼ï¼Œç•™å‡ºè¿”ç¨‹æ—¶é—´"
        ],
        backup: "é›¨å¤©ï¼šæå‰è¿”ç¨‹ + åŸåŒºè¡¥æ‹ + ä¼´æ‰‹ç¤¼"
      }
    ],
    food: [
      "è€åŸå°åƒï¼šå°‘é‡å¤šæ ·ï¼Œå…ˆè¯•å†å›å¤´åƒæœ€å–œæ¬¢çš„",
      "å¤œé€›èŠ‚å¥ï¼šåˆ«æŠŠè‡ªå·±åƒæ’‘ï¼Œç•™ç‚¹ç©ºé—´ç»™å¤œæ™¯",
      "æœ¬åœ°å®¶å¸¸é¦†ï¼šæ›´å®¹æ˜“è¸©ä¸­çœŸå®å£å‘³ï¼Œé¿å¼€è¿‡åº¦ç½‘çº¢",
      "çƒ­é¥®/ç”œå“ï¼šå¤œæ™šæ•£æ­¥é…ä¸€æ¯ï¼Œä½“éªŒæ›´å®Œæ•´"
    ],
    traffic: [
      "åˆ°è¾¾åå»ºè®®å…ˆæ”¾å¥½è¡Œæå†å‡ºé—¨ï¼ŒåŸå¸‚èŠ‚å¥ä¼šæ›´è½»æ¾",
      "å¿åŸå†…çŸ­è·ç¦»ï¼šæ‰“è½¦/å…±äº«å‡ºè¡Œéƒ½æ–¹ä¾¿ï¼Œå¤œæ™šæ­¥è¡Œæ›´èˆ’æœ",
      "å¦‚æœè¦æ‰©å±•å‘¨è¾¹ï¼šè‡ªé©¾/åŒ…è½¦æ›´çœå¿ƒï¼ˆæ—¶é—´å¯æ§ï¼‰"
    ]
  };

  // =========================
  // 2) éŸ³é¢‘æ’­æ”¾ï¼ˆä¼˜å…ˆ MP3ï¼Œå…¶æ¬¡ Web Speech å…œåº•ï¼‰
  // =========================
  const player = new Audio();
  player.preload = "auto";
  let playingAll = false;

  function stopAllAudio(){
    playingAll = false;
    player.pause();
    player.currentTime = 0;
    if (window.speechSynthesis?.speaking) window.speechSynthesis.cancel();
  }

  function playMp3(url){
    return new Promise((resolve, reject)=>{
      player.onended = () => resolve();
      player.onerror = () => reject(new Error("mp3_load_failed"));
      player.src = url;
      player.play().then(resolve).catch(reject);
    });
  }

  // --- Web Speech å¥³å£°å…œåº•ï¼šç”œä¸€ç‚¹ï¼ˆç•¥å¿«ã€æ›´é«˜ pitchï¼‰ ---
  const synth = window.speechSynthesis;
  let voices = [];
  let femaleVoice = null;

  function loadVoices(){
    voices = synth.getVoices() || [];
    const zh = voices.filter(v => /zh|Chinese/i.test(v.lang));
    femaleVoice =
      zh.find(v => /Xiaoxiao|Xiaoyi|Xiaochen|Yaoyao|Meimei|Tingting|Huihui/i.test(v.name)) ||
      zh.find(v => /female|woman/i.test(v.name)) ||
      zh[0] || voices[0] || null;
  }
  loadVoices();
  if (speechSynthesis.onvoiceschanged !== undefined) {
    speechSynthesis.onvoiceschanged = loadVoices;
  }

  function speakFallback(text){
    return new Promise((resolve)=>{
      if (!synth) return resolve();
      const u = new SpeechSynthesisUtterance(text);
      if (femaleVoice) u.voice = femaleVoice;
      // â€œç”œä¸€ç‚¹â€çš„æ„Ÿè§‰ï¼šç•¥å¿«ä¸€ç‚¹ + æ›´é«˜ pitchï¼ˆåˆ«å¤ªå¤¸å¼ ï¼‰
      u.rate = 1.02;
      u.pitch = 1.25;
      u.volume = 1;
      u.onend = resolve;
      synth.cancel();
      synth.speak(u);
    });
  }

  async function playSpotVoice(spot){
    stopAllAudio();

    const mp3Url = `audio/spot${spot.id}.mp3`;
    try{
      await playMp3(mp3Url);
    }catch(e){
      // MP3 æ²¡æœ‰æˆ–åŠ è½½å¤±è´¥ â†’ å…œåº•æœ—è¯»
      await speakFallback(`${spot.name}ã€‚${spot.voice_text}`);
    }
  }

  async function playAllGuide(){
    stopAllAudio();
    playingAll = true;

    const intro = "æ¬¢è¿æ¥åˆ°æ²³å—çœæ½¢å·å¿ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šç”¨ç”œç”œçš„è¯­æ°”ï¼Œå¸¦ä½ å¿«é€Ÿæµè§ˆå…«ä¸ªç²¾é€‰ç‚¹ä½ï¼Œå¹¶ç»™å‡ºä¸‰æ—¥è·¯çº¿å»ºè®®ã€‚";
    try{
      await playMp3("audio/intro.mp3");
    }catch(e){
      await speakFallback(intro);
    }

    for (const s of DATA.spots){
      if (!playingAll) break;
      try{
        await playMp3(`audio/spot${s.id}.mp3`);
      }catch(e){
        await speakFallback(`${s.name}ã€‚${s.voice_text}`);
      }
    }
    playingAll = false;
  }

  // =========================
  // 3) æ¸²æŸ“
  // =========================
  const wrap = document.getElementById("spotsWrap");
  const chips = [...document.querySelectorAll(".chip")];

  function amapSearchLink(name){
    const q = encodeURIComponent(`${DATA.city} ${name}`);
    return `https://ditu.amap.com/search?query=${q}`;
  }

  function render(filter="all"){
    wrap.innerHTML = "";
    const list = DATA.spots.filter(s => filter==="all" ? true : s.tags.includes(filter));
    list.forEach((s, idx) => {
      const card = document.createElement("div");
      card.className = "spot";

      card.innerHTML = `
        <div class="spotGrid">
          <div class="spotMedia">
            <span class="badge">#${idx+1} Â· ${s.tags[0] || "ç²¾é€‰"}</span>
            <img src="${s.image}" alt="${s.name}"
              onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop';" />
          </div>
          <div class="spotBody">
            <div class="spotTitle">
              <h3>${s.name}</h3>
              <div class="meta">${s.location ? "åæ ‡ï¼š" + s.location : ""}</div>
            </div>
            <div class="meta">åœ°å€ï¼š${s.address || "â€”"}</div>

            <div class="tags">
              ${(s.tags||[]).map(t=>`<span class="tag">${t}</span>`).join("")}
            </div>

            <p class="hl"><strong>äº®ç‚¹ï¼š</strong>${(s.highlights||[]).join("ï¼›")}ã€‚</p>

            <div class="kv">
              <div>ğŸ•’ æœ€ä½³æ—¶é—´ï¼š<span style="color:var(--good)">${s.best_time || "â€”"}</span></div>
              <div>â³ å»ºè®®åœç•™ï¼š<span style="color:var(--good)">${s.duration || "â€”"}</span></div>
            </div>

            <div class="spotActions">
              <button class="btn" data-say>ç”œç¾å¥³å£°è®²è§£</button>
              <button class="btn secondary" data-stop>åœæ­¢</button>
              <a class="linkBtn" href="${amapSearchLink(s.name)}" target="_blank" rel="noreferrer">æ‰“å¼€é«˜å¾·åœ°å›¾</a>
            </div>

            <div class="small" style="margin-top:10px">
              éŸ³é¢‘ä¼˜å…ˆï¼š<code>/audio/spot${s.id}.mp3</code>ï¼ˆæ²¡æœ‰åˆ™è‡ªåŠ¨æœ—è¯»å…œåº•ï¼‰
            </div>
          </div>
        </div>
      `;

      card.querySelector("[data-say]").onclick = () => playSpotVoice(s);
      card.querySelector("[data-stop]").onclick = stopAllAudio;

      wrap.appendChild(card);
    });
  }

  chips.forEach(c=>{
    c.addEventListener("click", ()=>{
      chips.forEach(x=>x.classList.remove("active"));
      c.classList.add("active");
      render(c.dataset.filter);
    });
  });

  // ä¾§è¾¹æ å†…å®¹
  const it = document.getElementById("itinerary");
  DATA.itinerary.forEach(d=>{
    const el = document.createElement("div");
    el.className = "day";
    el.innerHTML = `
      <h4>${d.day}</h4>
      <ul class="list">${d.plan.map(x=>`<li>${x}</li>`).join("")}</ul>
      <div class="small" style="margin-top:8px">â˜” é›¨å¤©å¤‡é€‰ï¼š${d.backup}</div>
    `;
    it.appendChild(el);
  });

  const food = document.getElementById("food");
  DATA.food.forEach(x=>{
    const li = document.createElement("li");
    li.textContent = x;
    food.appendChild(li);
  });

  const traffic = document.getElementById("traffic");
  DATA.traffic.forEach(x=>{
    const li = document.createElement("li");
    li.textContent = x;
    traffic.appendChild(li);
  });

  // å…¨å±€æ’­æ”¾/åœæ­¢
  document.getElementById("stopAll").onclick = stopAllAudio;
  document.getElementById("playAll").onclick = playAllGuide;

  // åˆå§‹æ¸²æŸ“
  render("all");
</script>
</body>
</html>
