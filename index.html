<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI æ—…è¡ŒåŠ©æ‰‹ Â· æ²³å—çœæ½¢å·å¿æ·±åº¦æ”»ç•¥</title>
  <meta name="description" content="æ½¢å·å¿æ·±åº¦æ—…æ¸¸æ”»ç•¥ï¼šç²¾é€‰æ™¯ç‚¹ã€3æ—¥è·¯çº¿ã€ç²¾ç¾é…å›¾ä¸å¥³æ€§è¯­éŸ³è®²è§£ã€‚çº¯é™æ€ç½‘é¡µï¼Œæ‰“å¼€å³ç”¨ã€‚" />
  <link rel="preconnect" href="https://images.unsplash.com" />
  <style>
    :root{
      --bg:#070b18;
      --glass:rgba(255,255,255,.10);
      --stroke:rgba(255,255,255,.18);
      --txt:#eef1f6;
      --muted:#a8b0c2;
      --accent:#7aa2ff;
      --gold:#e6c17a;
      --good:#6ee7b7;
      --bad:#fb7185;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
      color:var(--txt);
      background:
        radial-gradient(1200px 600px at 10% -10%, #1b2455, transparent 60%),
        radial-gradient(1000px 500px at 110% 10%, #2a1f4d, transparent 55%),
        radial-gradient(800px 500px at 50% 120%, #183a2b, transparent 55%),
        var(--bg);
    }
    a{color:inherit}
    header{position:relative; overflow:hidden; padding:88px 18px 112px; text-align:center;}
    .heroBg{
      position:absolute; inset:0; z-index:-1; opacity:.36;
      background:url("https://images.unsplash.com/photo-1524492412937-b28074a5d7da?q=80&w=2400&auto=format&fit=crop") center/cover no-repeat;
      filter:saturate(1.1) contrast(1.05);
    }
    .heroGlow{
      position:absolute; inset:-30%;
      background: radial-gradient(circle at 30% 30%, rgba(122,162,255,.25), transparent 35%),
                  radial-gradient(circle at 70% 20%, rgba(230,193,122,.20), transparent 35%),
                  radial-gradient(circle at 50% 70%, rgba(110,231,183,.18), transparent 40%);
      z-index:-1;
      transform: rotate(6deg);
    }
    h1{margin:0 0 10px; font-size:clamp(30px,5vw,56px); letter-spacing:.6px;}
    .sub{max-width:980px;margin:0 auto;color:var(--muted);line-height:1.6}
    .pillRow{margin-top:16px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px;
      background:rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.18);
      color:var(--muted); backdrop-filter: blur(8px);
    }
    .container{max-width:1200px;margin:-58px auto 64px; padding:0 18px}
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
      border:1px solid var(--stroke);
      border-radius:var(--r);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .inner{padding:18px}
    .topbar{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between}
    .filters{display:flex; flex-wrap:wrap; gap:10px}
    .chip{
      padding:8px 12px; border-radius:999px; cursor:pointer;
      border:1px solid rgba(255,255,255,.28);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      user-select:none;
    }
    .chip.active{background:linear-gradient(135deg,var(--accent),#9bd0ff); color:#061022; border-color:transparent;}
    .btn{
      padding:10px 14px; border-radius:999px; cursor:pointer; border:0;
      background:linear-gradient(135deg,var(--accent),#9bd0ff);
      color:#061022; font-weight:700;
    }
    .btn.secondary{
      background:transparent; color:var(--txt);
      border:1px solid rgba(255,255,255,.35);
    }
    .btnRow{display:flex; gap:10px; flex-wrap:wrap}
    .spots{grid-column:span 12}
    .aside{grid-column:span 12}
    @media (min-width: 960px){
      .spots{grid-column:span 8}
      .aside{grid-column:span 4}
    }
    .spot{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      overflow:hidden;
      background:rgba(0,0,0,.14);
      transition: transform .22s ease, border-color .22s ease, box-shadow .22s ease;
    }
    .spot:hover{
      transform: translateY(-3px);
      border-color: rgba(122,162,255,.55);
      box-shadow: 0 18px 48px rgba(0,0,0,.45);
    }
    .spotGrid{
      display:grid; grid-template-columns: 1fr; gap:0;
    }
    .spotMedia{
      position:relative;
      height:260px;
      background:#0c1226;
    }
    .spotMedia img{
      width:100%; height:100%; object-fit:cover; display:block;
    }
    .badge{
      position:absolute; left:14px; top:14px;
      padding:6px 10px; border-radius:999px;
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.22);
      backdrop-filter: blur(10px);
      font-size:12px; color:var(--txt);
    }
    .spotBody{padding:14px 14px 16px}
    .spotTitle{display:flex; gap:10px; align-items:baseline; justify-content:space-between; flex-wrap:wrap}
    .spotTitle h3{margin:0; font-size:18px}
    .meta{color:var(--muted); font-size:12px}
    .tags{display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 10px}
    .tag{font-size:12px; color:#061022; background:var(--gold); padding:4px 8px; border-radius:999px;}
    .hl{margin:0; color:var(--txt); line-height:1.65}
    .kv{
      display:grid; grid-template-columns: 1fr 1fr;
      gap:10px; margin-top:12px;
      color:var(--muted); font-size:12px;
    }
    .kv div{
      padding:10px; border:1px solid rgba(255,255,255,.14);
      border-radius:14px; background:rgba(0,0,0,.12);
    }
    .spotActions{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .linkBtn{
      padding:9px 12px; border-radius:999px; font-size:13px;
      border:1px solid rgba(255,255,255,.32);
      background:rgba(0,0,0,.12);
      color:var(--txt); text-decoration:none;
    }
    .sectionTitle{margin:0 0 10px; font-size:18px}
    .small{color:var(--muted); font-size:12px; line-height:1.6}
    .itinerary .day{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px; padding:12px; background:rgba(0,0,0,.12);
      margin-top:10px;
    }
    .day h4{margin:0 0 8px}
    .list{margin:0; padding-left:18px; color:var(--muted); line-height:1.8}
    .cta{
      margin-top:14px; padding:14px; border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(135deg, rgba(122,162,255,.18), rgba(230,193,122,.12));
    }
    footer{padding:26px; text-align:center; color:var(--muted)}
    .warn{color:rgba(255,255,255,.75)}
    .ok{color:var(--good)}
  </style>
</head>
<body>
<header>
  <div class="heroBg"></div>
  <div class="heroGlow"></div>
  <h1>æ²³å—çœæ½¢å·å¿ Â· AI æ·±åº¦æ—…æ¸¸æ”»ç•¥</h1>
  <p class="sub">
    è¿™æ˜¯ä¸€ä»½â€œåƒäº§å“ä¸€æ ·â€çš„æ—…æ¸¸æ”»ç•¥ Demoï¼šç²¾é€‰æ™¯ç‚¹ã€ä¸‰æ—¥è·¯çº¿ã€ç²¾ç¾é…å›¾ï¼Œå¹¶å¸¦<strong>å¥³æ€§æ¸©æŸ”å¯¼æ¸¸è¯­éŸ³</strong>è®²è§£ã€‚
    çº¯é™æ€ç½‘é¡µï¼Œä¸€æ¡é“¾æ¥å³å¯è®¿é—®ä¸è†å¬ã€‚
  </p>
  <div class="pillRow">
    <div class="pill">ğŸ“ åŸå¸‚ï¼šæ½¢å·å¿</div>
    <div class="pill">ğŸ—ºï¸ ç±»å‹ç­›é€‰ï¼šè‡ªç„¶ / å†å² / äº²å­ / å¤œæ¸¸</div>
    <div class="pill">ğŸ§ è¯­éŸ³ï¼šä¼˜å…ˆå¥³å£°ï¼ˆç³»ç»Ÿå¯ç”¨åˆ™æ›´ä½³ï¼‰</div>
  </div>
</header>

<main class="container">
  <section class="grid">

    <div class="card spots">
      <div class="inner">
        <div class="topbar">
          <div>
            <h2 style="margin:0 0 6px">ç²¾é€‰æ™¯ç‚¹ Â· Top 8</h2>
            <div class="small">æç¤ºï¼šå›¾ç‰‡æ¥è‡ª Unsplash è‡ªåŠ¨æ£€ç´¢ï¼›åœ°å›¾æŒ‰é’®ä¼šæ‰“å¼€é«˜å¾·æœç´¢é¡µï¼ˆæ— éœ€æš´éœ² Keyï¼‰ã€‚</div>
          </div>
          <div class="btnRow">
            <button class="btn" id="playAll">æ’­æ”¾æ•´æ®µå¯¼è§ˆ</button>
            <button class="btn secondary" id="stopAll">åœæ­¢</button>
          </div>
        </div>

        <div class="filters" style="margin-top:12px">
          <div class="chip active" data-filter="all">å…¨éƒ¨</div>
          <div class="chip" data-filter="è‡ªç„¶">è‡ªç„¶</div>
          <div class="chip" data-filter="å†å²">å†å²</div>
          <div class="chip" data-filter="äº²å­">äº²å­</div>
          <div class="chip" data-filter="å¤œæ¸¸">å¤œæ¸¸</div>
        </div>

        <div id="spotsWrap" style="margin-top:14px"></div>
      </div>
    </div>

    <aside class="card aside">
      <div class="inner">
        <h3 class="sectionTitle">3 å¤©æ¸¸ç©è·¯çº¿</h3>
        <div class="itinerary" id="itinerary"></div>

        <h3 class="sectionTitle" style="margin-top:16px">ç¾é£Ÿä¸å¤œæ™š</h3>
        <ul class="list" id="food"></ul>

        <h3 class="sectionTitle" style="margin-top:16px">äº¤é€šåˆ°è¾¾</h3>
        <ul class="list" id="traffic"></ul>

        <h3 class="sectionTitle" style="margin-top:16px">è¯­éŸ³è¯´æ˜</h3>
        <p class="small">
          æœ¬é¡µä½¿ç”¨æµè§ˆå™¨ Web Speech API è¿›è¡Œè®²è§£ï¼šä¼šå°è¯•é€‰æ‹©<strong>ä¸­æ–‡å¥³å£°</strong>ï¼›ä¸åŒç”µè„‘/ç³»ç»Ÿå¯ç”¨éŸ³è‰²ä¸ä¸€æ ·ã€‚
          è‹¥ä½ ä¹‹åæ¥å…¥ä¸“ä¸š TTSï¼ˆé˜¿é‡Œ/ç«å±±/OpenAIï¼‰ï¼Œåªéœ€æŠŠæ¯ä¸ªæ™¯ç‚¹çš„ <code>voice_text</code> æ¢æˆéŸ³é¢‘ URL å³å¯ã€‚
        </p>

        <div class="cta">
          <div class="warn">âœ… äº§å“å±•ç¤ºå»ºè®®</div>
          <div class="small">
            æƒ³åšåˆ°â€œé«˜å¾· MCP å®æ—¶æ‹‰å–â€ä½†åˆä¸æš´éœ² Keyï¼šç”¨ä¸€ä¸ªæå°çš„åç«¯/è¾¹ç¼˜å‡½æ•°ç”Ÿæˆ <code>guide.json</code>ï¼Œé™æ€é¡µåªè¯» JSONã€‚
            è¿™æ ·æ—¢åƒäº§å“ï¼Œåˆç¨³å®šã€‚
          </div>
        </div>
      </div>
    </aside>

  </section>
</main>

<footer>Â© AI Travel Assistant Demo Â· æ½¢å·å¿</footer>

<script>
  // ====== æ¼”ç¤ºæ•°æ®ï¼ˆé™æ€ç½‘é¡µç¨³å®šç”¨æ³•ï¼‰======
  // ä½ å¯ä»¥ç”¨é«˜å¾· MCP åœ¨æœ¬åœ°ç”Ÿæˆæ›´ç²¾ç¡®çš„ POIï¼Œå†æ›¿æ¢ä¸‹é¢å­—æ®µã€‚
  const DATA = {
    city: "æ²³å—çœæ½¢å·å¿",
    spots: [
      {
        name: "æ½¢å·åŸå¸‚å…¬å›­ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿åŸåŒºï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.05,32.13",
        tags: ["è‡ªç„¶","æ‹ç…§"],
        highlights: ["å‚æ™šæ•£æ­¥å¾ˆèˆ’æœ","é€‚åˆåŸå¸‚æ…¢æ¸¸","éšæ‰‹æ‹æœ‰æ°›å›´æ„Ÿ"],
        best_time: "æ—¥è½å‰å / å‘¨æœ«æ¸…æ™¨",
        duration: "1.5â€“2 å°æ—¶",
        photo_query: "Xinyang park sunset",
        voice_text: "ç°åœ¨æˆ‘ä»¬æ¥åˆ°æ½¢å·çš„åŸå¸‚å…¬å›­ã€‚è¿™é‡Œå¾ˆé€‚åˆæ”¾æ…¢è„šæ­¥ï¼šæ²¿ç€æ¹–è¾¹æˆ–æ—è«é“èµ°ä¸€åœˆï¼Œæ—¥è½æ—¶å…‰çº¿ä¼šå˜å¾—ç‰¹åˆ«æŸ”å’Œã€‚å»ºè®®ä½ æŠŠèŠ‚å¥è°ƒæ…¢ä¸€ç‚¹ï¼Œæ‰¾ä¸€ä¸ªå®‰é™çš„è§’è½æ‹å‡ å¼ ç…§ç‰‡ï¼Œå†ç”¨ä¸€æ¯çƒ­é¥®æŠŠæ—…é€”çš„ç–²æƒ«è½»è½»æŠšå¹³ã€‚"
      },
      {
        name: "æ½¢å·è€åŸè¡—å··ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿è€åŸåŒºï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.05,32.12",
        tags: ["å†å²","ç¾é£Ÿ","å¤œæ¸¸"],
        highlights: ["æ›´æ¥åœ°æ°”çš„ç”Ÿæ´»æ„Ÿ","é€‚åˆå°åƒæ‰«è¡—","å¤œæ™šæ›´æœ‰çƒŸç«æ°”"],
        best_time: "18:00â€“21:00",
        duration: "2â€“3 å°æ—¶",
        photo_query: "China old street night market",
        voice_text: "å¦‚æœä½ æƒ³ç”¨æœ€è½»æ¾çš„æ–¹å¼è®¤è¯†ä¸€åº§åŸï¼Œå°±å»å®ƒçš„è€è¡—èµ°èµ°ã€‚æ½¢å·çš„è€åŸè¡—å··æ›´åƒç”Ÿæ´»çš„èˆå°ï¼šå°åƒæ‘Šçš„é¦™æ°”ã€åº—é“ºçš„ç¯å…‰ã€è·¯äººéšæ„çš„ç¬‘å£°ï¼Œéƒ½å¾ˆçœŸå®ã€‚æ™šä¸Šæ¥è¿™é‡Œæ…¢æ…¢é€›ï¼Œåˆ«èµ¶æ—¶é—´ï¼Œçœ‹åˆ°å–œæ¬¢çš„å°±åœä¸‹æ¥å°ä¸€å£ã€‚"
      },
      {
        name: "è¿‘éƒŠæ¹¿åœ°/æ°´åŸŸé£å…‰ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿å‘¨è¾¹ï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.08,32.16",
        tags: ["è‡ªç„¶","äº²å­","æ‹ç…§"],
        highlights: ["æ°´é¢ä¸å¤©ç©ºå¾ˆå‡ºç‰‡","äº²å­è½»å¾’æ­¥å‹å¥½","é›¨åç©ºæ°”æ›´æ¸…é€"],
        best_time: "æ˜¥ç§‹å­£ / é›¨åæ™´å¤©",
        duration: "2â€“3 å°æ—¶",
        photo_query: "wetland boardwalk sunrise",
        voice_text: "æ¥ä¸‹æ¥è¿™æ®µæ›´é€‚åˆæŠŠå¿ƒæƒ…æ”¾åˆ°è‡ªç„¶é‡Œã€‚æ¹¿åœ°æˆ–æ°´åŸŸæœ€å¤§çš„é­…åŠ›ï¼Œæ˜¯é‚£ç§å¼€é˜”ï¼šé£ä¸€å¹ï¼Œæ°´é¢ä¼šæœ‰ç»†ç¢çš„å…‰ã€‚å»ºè®®ä½ æ²¿æ­¥é“æ…¢æ…¢èµ°ï¼Œç»™è‡ªå·±ä¸€ç‚¹å®‰é™çš„æ—¶é—´ã€‚äº²å­å‡ºè¡Œä¹Ÿå¾ˆå‹å¥½ï¼Œä½†è®°å¾—å¸¦é˜²èšŠä¸è½»ä¾¿é›¨å…·ã€‚"
      },
      {
        name: "æœ¬åœ°çºªå¿µåœºé¦†ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿åŸåŒºï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.06,32.13",
        tags: ["å†å²","æ–‡åŒ–"],
        highlights: ["é€‚åˆé›¨å¤©æ›¿ä»£è¡Œç¨‹","å¿«é€Ÿäº†è§£åœ°æ–¹è„‰ç»œ","æ‹ç…§æ›´åäººæ–‡é£"],
        best_time: "ä¸Šåˆ 9:00â€“11:30",
        duration: "1â€“2 å°æ—¶",
        photo_query: "China museum interior",
        voice_text: "å¦‚æœä½ é‡åˆ°é›¨å¤©ï¼Œæˆ–è€…æƒ³å¿«é€Ÿè¯»æ‡‚å½“åœ°çš„è„‰ç»œï¼Œçºªå¿µåœºé¦†ä¼šæ˜¯å¾ˆç¨³çš„é€‰æ‹©ã€‚è¿™é‡Œçš„ä»·å€¼åœ¨äºâ€œçº¿ç´¢â€ï¼šä½ ä¼šçŸ¥é“è¿™åº§åŸå¸‚ä»å“ªé‡Œæ¥ã€ç»å†è¿‡ä»€ä¹ˆã€‚å»ºè®®ä½ å¸¦ç€é—®é¢˜å»çœ‹ï¼Œæ¯”å¦‚ï¼šè¿™ç‰‡åœŸåœ°æœ€é‡è¦çš„èµ„æºä¸æ•…äº‹æ˜¯ä»€ä¹ˆï¼Ÿç­”æ¡ˆå¾€å¾€å°±è—åœ¨å±•é™ˆé‡Œã€‚"
      },
      {
        name: "éƒŠé‡ç”°å›­ä¸é‡‡æ‘˜ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿è¿‘éƒŠï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.02,32.10",
        tags: ["äº²å­","è‡ªç„¶"],
        highlights: ["äº²å­ä½“éªŒæ„Ÿå¼º","é€‚åˆåŠæ—¥æ¸¸","æ‹ç…§æ°›å›´è½»æ¾"],
        best_time: "å‘¨æœ«ç™½å¤© / ç§‹å­£æ›´ä½³",
        duration: "åŠå¤©",
        photo_query: "farm orchard picking",
        voice_text: "æƒ³è¦è½»æ¾ä¸€ç‚¹çš„åŠæ—¥æ¸¸ï¼Œå¯ä»¥å®‰æ’éƒŠé‡ç”°å›­æˆ–é‡‡æ‘˜ä½“éªŒã€‚è¿™é‡Œçš„å¿«ä¹å¾ˆç›´æ¥ï¼šæ–°é²œã€æ”¾æ¾ã€æ²¡æœ‰å‹åŠ›ã€‚äº²å­å®¶åº­å°¤å…¶é€‚åˆï¼Œå­©å­ä¼šæ›´æ„¿æ„å‚ä¸ã€‚å»ºè®®ä½ ç©¿èˆ’é€‚çš„é‹å­ï¼Œå¸¦ä¸€ç‚¹æ¹¿å·¾å’Œé¥®ç”¨æ°´ï¼ŒæŠŠè¡Œç¨‹å½“ä½œä¸€æ¬¡å°å°çš„é€ƒç¦»ã€‚"
      },
      {
        name: "åŸå¸‚å¤œæ™¯æ•£æ­¥è·¯çº¿ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿ä¸­å¿ƒåŒºåŸŸï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.05,32.135",
        tags: ["å¤œæ¸¸","æ‹ç…§"],
        highlights: ["å¤œæ™šæ›´èˆ’æœ","é€‚åˆè½»é‡è¿åŠ¨","æ°›å›´æ„Ÿå¾ˆå¼º"],
        best_time: "20:00â€“22:00",
        duration: "1â€“1.5 å°æ—¶",
        photo_query: "city night lights river walk",
        voice_text: "åˆ°äº†å¤œé‡Œï¼Œæ—…è¡Œçš„èŠ‚å¥æ›´é€‚åˆâ€˜è½»è½»åœ°â€™ã€‚æŒ‘ä¸€æ¡ç¯å…‰æŸ”å’Œçš„æ•£æ­¥è·¯çº¿ï¼Œä¸éœ€è¦èµ°å¤ªè¿œï¼Œåªè¦è®©å¿ƒæƒ…æ…¢æ…¢æ²‰ä¸‹æ¥ã€‚å¤œæ™¯æœ€å‡ºç‰‡çš„ä¸æ˜¯å®å¤§ï¼Œè€Œæ˜¯ç»†èŠ‚ï¼šè·¯ç¯çš„åå…‰ã€è¡—è¾¹çš„æ‹›ç‰Œã€é£å¹è¿‡çš„æ ‘å½±ã€‚"
      },
      {
        name: "æœ¬åœ°ç‰¹è‰²å¸‚åœºï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿åŸåŒºï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.055,32.125",
        tags: ["å¤œæ¸¸","ç¾é£Ÿ","äº²å­"],
        highlights: ["çƒŸç«æ°”æœ€æµ“","å°åƒé€‰æ‹©å¤š","é€‚åˆè¾¹åƒè¾¹é€›"],
        best_time: "å‚æ™šåˆ°å¤œé—´",
        duration: "1â€“2 å°æ—¶",
        photo_query: "China street food market",
        voice_text: "å¸‚åœºæ˜¯ä¸€åº§åŸå¸‚æœ€ä¸è®¾é˜²çš„åœ°æ–¹ã€‚ä½ ä¼šå¬åˆ°è®¨ä»·è¿˜ä»·çš„å£°éŸ³ï¼Œé—»åˆ°åˆšå‡ºé”…çš„é¦™æ°”ï¼Œä¹Ÿä¼šçœ‹åˆ°æœ€æœ´ç´ çš„ç”Ÿæ´»ã€‚æ¥è¿™é‡Œä¸éœ€è¦æ”»ç•¥ï¼Œè·Ÿç€äººæµèµ°å°±è¡Œã€‚å»ºè®®å…ˆå°‘é‡å¤šæ ·åœ°å°è¯•ï¼Œæ‰¾åˆ°æœ€å–œæ¬¢çš„é‚£ä¸€å®¶ï¼Œå†å›å¤´è®¤çœŸåƒä¸€ä»½ã€‚"
      },
      {
        name: "å‘¨è¾¹çŸ­é€”ä¸€æ—¥è‡ªç„¶ç‚¹ï¼ˆç¤ºä¾‹ï¼‰",
        address: "æ½¢å·å¿å‘¨è¾¹ï¼ˆä»¥å®é™…ä¸ºå‡†ï¼‰",
        location: "115.10,32.09",
        tags: ["è‡ªç„¶","æ‹ç…§"],
        highlights: ["é€‚åˆçŸ­é€”è‡ªé©¾","å…‰çº¿å¥½æ—¶éå¸¸å‡ºç‰‡","å¯ä¸å†œå®¶ä¹ç»„åˆ"],
        best_time: "æ™´å¤©ä¸Šåˆ / æ˜¥ç§‹",
        duration: "åŠå¤©åˆ°ä¸€å¤©",
        photo_query: "countryside hills morning mist",
        voice_text: "å¦‚æœä½ æ„¿æ„æŠŠåŠå¾„ç¨å¾®æ”¾å¤§ä¸€ç‚¹ï¼Œå‘¨è¾¹çš„çŸ­é€”è‡ªç„¶ç‚¹ä¼šç»™ä½ æ›´å¼€é˜”çš„æ™¯è‰²ã€‚æŒ‘ä¸€ä¸ªæ™´å¤©æ—©ä¸Šå‡ºå‘ï¼Œå…‰çº¿ä¼šæ›´å¹²å‡€ã€‚å¯ä»¥æŠŠå®ƒå’Œå†œå®¶ä¹ã€ä¹¡é—´å°è·¯ç»„åˆæˆè½»æ¾çš„ä¸€æ—¥æ¸¸ã€‚è®°å¾—ç•™ç™½ï¼Œä¸è¦æŠŠæ—¶é—´æ’æ»¡ï¼Œæ‰æ›´åƒæ—…è¡Œã€‚"
      }
    ],
    itinerary: [
      {
        day: "Day 1 Â· åŸå¸‚æ…¢æ¸¸ä¸å¤œæ™šçƒŸç«",
        plan: [
          "ä¸Šåˆï¼šåŸå¸‚å…¬å›­/ä¸»åŸæ•£æ­¥ï¼Œå»ºç«‹â€˜æ½¢å·ç¬¬ä¸€å°è±¡â€™",
          "ä¸­åˆï¼šæœ¬åœ°å®¶å¸¸/ç‰¹è‰²å°é¦†ï¼ˆå°‘é‡å¤šæ ·ï¼‰",
          "ä¸‹åˆï¼šçºªå¿µåœºé¦†/äººæ–‡ç‚¹ï¼ˆé›¨å¤©ä¹Ÿå¯ï¼‰",
          "æ™šä¸Šï¼šè€åŸè¡—å··æˆ–å¸‚åœºæ‰«è¡— + å¤œæ™¯æ•£æ­¥"
        ],
        backup: "é›¨å¤©ï¼šçºªå¿µåœºé¦† + å®¤å†…å’–å•¡/èŒ¶é¥® + å¸‚åœºçŸ­é€›"
      },
      {
        day: "Day 2 Â· è‡ªç„¶ä¸äº²å­ä½“éªŒ",
        plan: [
          "ä¸Šåˆï¼šæ¹¿åœ°/æ°´åŸŸé£å…‰è½»å¾’æ­¥ï¼ˆå¸¦é˜²èšŠï¼‰",
          "ä¸­åˆï¼šè¿‘éƒŠé¤é¦†/å†œå®¶èœ",
          "ä¸‹åˆï¼šç”°å›­/é‡‡æ‘˜ä½“éªŒæˆ–è½»æ¾éœ²è¥é£æ ¼ç‚¹ä½",
          "æ™šä¸Šï¼šè‡ªç”±æ´»åŠ¨ï¼ˆæ¨èè½»é‡å¤œèµ°ï¼‰"
        ],
        backup: "é›¨å¤©ï¼šå®¤å†…åœºé¦† + ç¾é£Ÿè·¯çº¿ï¼ˆä¸èµ¶æ™¯ç‚¹ï¼‰"
      },
      {
        day: "Day 3 Â· å‘¨è¾¹çŸ­é€”ä¸æ”¶å®˜",
        plan: [
          "ä¸Šåˆï¼šå‘¨è¾¹çŸ­é€”è‡ªç„¶ç‚¹ï¼ˆè‡ªé©¾æ›´ä½³ï¼‰",
          "ä¸­åˆï¼šåœ¨è·¯ä¸ŠæŒ‘ä¸€å®¶å£ç¢‘åº—æ”¶å®˜",
          "ä¸‹åˆï¼šå›åŸè¡¥æ‹/ä¹°ä¼´æ‰‹ç¤¼ï¼Œç•™å‡ºè¿”ç¨‹æ—¶é—´"
        ],
        backup: "é›¨å¤©ï¼šå›åŸè¡¥æ‹ + ä¼´æ‰‹ç¤¼ + æå‰è¿”ç¨‹"
      }
    ],
    food: [
      "è€åŸå°åƒï¼šå»ºè®®â€˜å°‘é‡å¤šæ ·â€™ï¼Œå…ˆè¯•å†å›å¤´åƒæœ€å–œæ¬¢çš„",
      "å¤œå¸‚/å¸‚åœºï¼šé€›åƒä½“éªŒä¼˜å…ˆï¼Œåˆ«æŠŠè‡ªå·±åƒæ’‘å½±å“ååŠæ®µ",
      "æœ¬åœ°å®¶å¸¸é¦†ï¼šæ›´å®¹æ˜“è¸©ä¸­çœŸå®å£å‘³ï¼ˆé¿å¼€è¿‡åº¦ç½‘çº¢ï¼‰",
      "çƒ­é¥®/ç”œå“ï¼šå¤œæ™šæ•£æ­¥é…ä¸€æ¯ï¼Œä½“éªŒæ›´å®Œæ•´"
    ],
    traffic: [
      "é«˜é“/æ±½è½¦åˆ°è¾¾åï¼šå»ºè®®å…ˆæŠŠé…’åº—æ”¾å¥½å†å‡ºé—¨ï¼ŒåŸå¸‚èŠ‚å¥æ›´è½»æ¾",
      "å¿åŸå†…ï¼šçŸ­è·ç¦»å¯æ‰“è½¦/å…±äº«å‡ºè¡Œï¼›å¤œæ™šæ•£æ­¥è·¯çº¿æ›´èˆ’é€‚",
      "å‘¨è¾¹ç‚¹ä½ï¼šæ›´å»ºè®®è‡ªé©¾æˆ–åŒ…è½¦ï¼ˆæ—¶é—´æ›´å¯æ§ï¼‰"
    ]
  };

  // ====== è¯­éŸ³ï¼ˆWeb Speech APIï¼šå°½é‡é€‰æ‹©ä¸­æ–‡å¥³å£°ï¼‰======
  const synth = window.speechSynthesis;
  let voices = [];
  let femaleVoice = null;
  let currentUtter = null;

  function loadVoices(){
    voices = synth.getVoices() || [];
    const zh = voices.filter(v => /zh|Chinese/i.test(v.lang));
    femaleVoice =
      zh.find(v => /female|woman|xiaoxiao|xiaoyi|tingting|huihui|yaoyao|meimei/i.test(v.name)) ||
      zh.find(v => /Microsoft Xiaoxiao|Xiaoxiao|Xiaoyi/i.test(v.name)) ||
      zh[0] || voices[0] || null;
  }
  loadVoices();
  if (speechSynthesis.onvoiceschanged !== undefined) {
    speechSynthesis.onvoiceschanged = loadVoices;
  }

  function stopSpeak(){
    if (synth && synth.speaking) synth.cancel();
    currentUtter = null;
  }

  function speakText(text){
    stopSpeak();
    const u = new SpeechSynthesisUtterance(text);
    if (femaleVoice) u.voice = femaleVoice;
    u.rate = 0.92; u.pitch = 1.05; u.volume = 1;
    currentUtter = u;
    synth.speak(u);
  }

  // ====== æ¸²æŸ“ ======
  const wrap = document.getElementById("spotsWrap");
  const chips = [...document.querySelectorAll(".chip")];

  function imgUrl(query){
    // Unsplash ä¸éœ€è¦ keyï¼Œç¨³å®šï¼Œé€‚åˆ demo
    const q = encodeURIComponent(query);
    return `https://images.unsplash.com/featured/?${q}&w=1600&auto=format&fit=crop&q=80`;
  }

  function amapSearchLink(name){
    // æ‰“å¼€é«˜å¾·æœç´¢é¡µï¼šæ— éœ€ keyï¼Œé¿å…æš´éœ²
    const q = encodeURIComponent(`${DATA.city} ${name}`);
    return `https://ditu.amap.com/search?query=${q}`;
  }

  function render(filter="all"){
    wrap.innerHTML = "";
    const list = DATA.spots.filter(s => filter==="all" ? true : s.tags.includes(filter));
    list.forEach((s, idx) => {
      const card = document.createElement("div");
      card.className = "spot";
      card.dataset.tags = s.tags.join(",");

      const img = imgUrl(s.photo_query || (DATA.city + " é£æ™¯"));
      card.innerHTML = `
        <div class="spotGrid">
          <div class="spotMedia">
            <span class="badge">#${idx+1} Â· ${s.tags[0] || "ç²¾é€‰"}</span>
            <img src="${img}" alt="${s.name}"
              onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop';" />
          </div>
          <div class="spotBody">
            <div class="spotTitle">
              <h3>${s.name}</h3>
              <div class="meta">${s.location ? "åæ ‡ï¼š" + s.location : ""}</div>
            </div>
            <div class="meta">åœ°å€ï¼š${s.address || "â€”"}</div>

            <div class="tags">
              ${(s.tags||[]).map(t=>`<span class="tag">${t}</span>`).join("")}
            </div>

            <p class="hl"><strong>äº®ç‚¹ï¼š</strong>${(s.highlights||[]).join("ï¼›")}ã€‚</p>

            <div class="kv">
              <div>ğŸ•’ æœ€ä½³æ—¶é—´ï¼š<span class="ok">${s.best_time || "â€”"}</span></div>
              <div>â³ å»ºè®®åœç•™ï¼š<span class="ok">${s.duration || "â€”"}</span></div>
            </div>

            <div class="spotActions">
              <button class="btn" data-say>è¯­éŸ³è®²è§£</button>
              <button class="btn secondary" data-stop>åœæ­¢</button>
              <a class="linkBtn" href="${amapSearchLink(s.name)}" target="_blank" rel="noreferrer">æ‰“å¼€é«˜å¾·åœ°å›¾</a>
            </div>
          </div>
        </div>
      `;

      card.querySelector("[data-say]").onclick = () => {
        const text = `${s.name}ã€‚${s.voice_text || ""}`;
        speakText(text);
      };
      card.querySelector("[data-stop]").onclick = stopSpeak;

      wrap.appendChild(card);
    });
  }

  chips.forEach(c=>{
    c.addEventListener("click", ()=>{
      chips.forEach(x=>x.classList.remove("active"));
      c.classList.add("active");
      render(c.dataset.filter);
    });
  });

  // ä¾§è¾¹æ å†…å®¹
  const it = document.getElementById("itinerary");
  DATA.itinerary.forEach(d=>{
    const el = document.createElement("div");
    el.className = "day";
    el.innerHTML = `
      <h4>${d.day}</h4>
      <ul class="list">${d.plan.map(x=>`<li>${x}</li>`).join("")}</ul>
      <div class="small" style="margin-top:8px">â˜” é›¨å¤©å¤‡é€‰ï¼š${d.backup}</div>
    `;
    it.appendChild(el);
  });

  const food = document.getElementById("food");
  DATA.food.forEach(x=>{
    const li = document.createElement("li");
    li.textContent = x;
    food.appendChild(li);
  });

  const traffic = document.getElementById("traffic");
  DATA.traffic.forEach(x=>{
    const li = document.createElement("li");
    li.textContent = x;
    traffic.appendChild(li);
  });

  // å…¨å±€æ’­æ”¾/åœæ­¢
  document.getElementById("stopAll").onclick = stopSpeak;
  document.getElementById("playAll").onclick = () => {
    const intro = `æ¬¢è¿æ¥åˆ°æ²³å—çœæ½¢å·å¿ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šç”¨æ¸©æŸ”çš„èŠ‚å¥ï¼Œå¸¦ä½ å¿«é€Ÿæµè§ˆå…«ä¸ªç²¾é€‰ç‚¹ä½ï¼Œå¹¶ç»™å‡ºä¸‰æ—¥è·¯çº¿å»ºè®®ã€‚`;
    const seq = [intro, ...DATA.spots.map(s=>`${s.name}ã€‚${s.voice_text}`)];
    // ç®€å•ä¸²æ’­ï¼šæ¯æ®µç»“æŸç»§ç»­ä¸‹ä¸€æ®µ
    stopSpeak();
    let i = 0;
    const playNext = () => {
      if (i >= seq.length) return;
      const u = new SpeechSynthesisUtterance(seq[i++]);
      if (femaleVoice) u.voice = femaleVoice;
      u.rate = 0.92; u.pitch = 1.05; u.volume = 1;
      u.onend = playNext;
      currentUtter = u;
      synth.speak(u);
    };
    playNext();
  };

  // åˆå§‹æ¸²æŸ“
  render("all");
</script>
</body>
</html>
